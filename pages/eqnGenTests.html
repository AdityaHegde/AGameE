<html>
  <head>
  	<script type="text/javascript" src="/js/eqn_gen.js"></script>
  	<script type="text/javascript" src="/js/eqn_solver.js"></script>
  	<script type="text/javascript" src="/js/utils.js"></script>
    <script src="/js/jquery2.0.3.js"></script>
    <style>
      .table {
        display:table;
      }
      .table-row {
        display:table-row;
      }
      .table-cell {
        display:table-cell;
      }
      .column {
        float:left;
        display:inline-block;
        width:50%;
      }
      .eqn-gen-text {
        width:calc(100% - 50px);
      }
      .output {
        width:calc(100% - 15px);
        padding:5px;
        word-break:break-word;
      }
      .test-case-div {
      }
    </style>
  </head>
  <body>
  	<div class="main-container">
      <div class="test-case-div">
        TC : <input id="test-cases" type="text"><button onclick="runTestCases()">Run test cases</button>
        <div id="log"></div>
      </div>
  	</div>
  	<script type="text/javascript">

      var testCases = [
        {
          eqnStrs : ["(a+b)^2"],
          lhsVars : ["a"],
          mainIndex : 0,
          simplified : "(b^2+2ab+a^2)",
          segregated : "(b^2+2ab+a^2)",
        },
        {
          eqnStrs : ["(a+b)^2+(a-c)^2"],
          lhsVars : ["a"],
          mainIndex : 0,
          simplified : "(b^2+2ab+2a^2+c^2+(-2)ac)",
          segregated : "(b^2+c^2+(2b+(-2)c)a+2a^2)",
        },
        {
          eqnStrs : ["a+d", "(a+b)^2+(b-c)^2"],
          lhsVars : ["c", "a"],
          mainIndex : 1,
          simplified : "(2b^2+2a^2+d^2+(-2)bd+2ad)",
          segregated : "(2b^2+d^2+(-2)bd+2ad+2a^2)",
        },
        {
          eqnStrs : ["a+d", "(a+b)^2+2*a*b*c"],
          lhsVars : ["c", "a"],
          mainIndex : 1,
          simplified : "(b^2+2ab+a^2+2a^2b+2abd)",
          segregated : "(b^2+(2b+2bd)a+(1+2b)a^2)",
        },
        {
          eqnStrs : ["a+b", "a+c", "(d+e)^2"],
          lhsVars : ["d", "e", "a"],
          mainIndex : 2,
          simplified : "(c^2+4ac+4a^2+4ab+2bc+b^2)",
          segregated : "(c^2+2bc+b^2+(4c+4b)a+4a^2)",
        },
        {
          eqnStrs : ["a+p*b", "a+p*c", "d^2+e^2"],
          lhsVars : ["d", "e", "p"],
          mainIndex : 2,
          simplified : "(2a^2+2abp+b^2p^2+2acp+c^2p^2)",
          segregated : "(2a^2+(2ab+2ac)p+(b^2+c^2)p^2)",
        },
        {
          eqnStrs : ["a*(b+c)+p", "a+p*c", "d^2+e^2"],
          lhsVars : ["d", "e", "p"],
          mainIndex : 2,
          simplified : "((b+c)^2a^2+2(b+c)ap+p^2+a^2+2acp+c^2p^2)",
          segregated : "((b+c)^2a^2+a^2+(2(b+c)a+2ac)p+(1+c^2)p^2)",
        },
        {
          eqnStrs : ["a+p*(b+c)^2", "a+p*c", "d^2+e^2"],
          lhsVars : ["d", "e", "p"],
          mainIndex : 2,
          simplified : "(2a^2+2(b+c)^2ap+(b+c)^4p^2+2acp+c^2p^2)",
          segregated : "(2a^2+((2(b+c)^2+2c)a)p+((b+c)^4+c^2)p^2)",
        },
        {
          eqnStrs : ["a+p*b", "(z-x)^2+(z-y)^2"],
          lhsVars : ["x", "z"],
          mainIndex : 1,
          simplified : "((a+bp)^2+(-2)(a+bp)z+2z^2+y^2+(-2)yz)",
          segregated : "((a+bp)^2+y^2+((-2)(a+bp)+(-2)y)z+2z^2)",
        },
      ], logdiv = $("#log");
      function log(logStr) {
        logdiv.append(logStr+"<br>");
      }
      function runTestCase(tci) {
        if(testCases[tci]) {
          var tc = testCases[tci],
              eqnGen = new EqnGen({equationStrings : tc.eqnStrs, lhsVariables : tc.lhsVars, mainIndex : tc.mainIndex});
          log("<br>TC "+tci);
          log(eqnGen.convertToString());
          eqnGen.simplify();
          eqnGen.buildMainEqn();
          var simplified = eqnGen.getMainEqn(), segregated = eqnGen.segregate();
          log("Simplified : "+simplified+(simplified !== tc.simplified ? " : FAILED != "+tc.simplified:""));
          log("Segregated : "+segregated+(segregated !== tc.segregated ? " : FAILED != "+tc.segregated:""));
          log("Code : "+eqnGen.getCode());
        }
      }
      function runTestCases() {
        logdiv.html("");
        var tcs = $("#test-cases").val();
        tcs = tcs.split(",");
        for(var i = 0; i < tcs.length; i++) {
          if(/-/.test(tcs[i])) {
            var tci = tcs[i].split("-");
            for(var j = tci[0]; j <= tci[1]; j++) runTestCase(j);
          }
          else {
            runTestCase(tcs[i]);
          }
        }
      }
  	</script>
  </body>
</html>
